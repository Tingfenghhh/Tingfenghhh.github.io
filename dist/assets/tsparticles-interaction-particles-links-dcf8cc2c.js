import{C as i,R as n,O as t,P as s,x as e,k as o,u as l,g as r,w as a,B as c,D as d,F as h,y as u,G as p}from"./tsparticles-engine-3b45a3b7.js";class k extends i{constructor(i,n,t,s){super(i,n,t),this.canvasSize=s,this.canvasSize=Object.assign({},s)}contains(i){if(super.contains(i))return!0;const n={x:i.x-this.canvasSize.width,y:i.y};if(super.contains(n))return!0;const t={x:i.x-this.canvasSize.width,y:i.y-this.canvasSize.height};if(super.contains(t))return!0;const s={x:i.x,y:i.y-this.canvasSize.height};return super.contains(s)}intersects(t){if(super.intersects(t))return!0;const s=t,e=t,o={x:t.position.x-this.canvasSize.width,y:t.position.y-this.canvasSize.height};if(void 0!==e.radius){const n=new i(o.x,o.y,2*e.radius);return super.intersects(n)}if(void 0!==s.size){const i=new n(o.x,o.y,2*s.size.width,2*s.size.height);return super.intersects(i)}return!1}}class y{constructor(){this.blur=5,this.color=new t,this.color.value="#000",this.enable=!1}load(i){i&&(void 0!==i.blur&&(this.blur=i.blur),this.color=t.create(this.color,i.color),void 0!==i.enable&&(this.enable=i.enable))}}class f{constructor(){this.enable=!1,this.frequency=1}load(i){i&&(void 0!==i.color&&(this.color=t.create(this.color,i.color)),void 0!==i.enable&&(this.enable=i.enable),void 0!==i.frequency&&(this.frequency=i.frequency),void 0!==i.opacity&&(this.opacity=i.opacity))}}class v{constructor(){this.blink=!1,this.color=new t,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new y,this.triangles=new f,this.width=1,this.warp=!1}load(i){i&&(void 0!==i.id&&(this.id=i.id),void 0!==i.blink&&(this.blink=i.blink),this.color=t.create(this.color,i.color),void 0!==i.consent&&(this.consent=i.consent),void 0!==i.distance&&(this.distance=i.distance),void 0!==i.enable&&(this.enable=i.enable),void 0!==i.frequency&&(this.frequency=i.frequency),void 0!==i.opacity&&(this.opacity=i.opacity),this.shadow.load(i.shadow),this.triangles.load(i.triangles),void 0!==i.width&&(this.width=i.width),void 0!==i.warp&&(this.warp=i.warp))}}function w(i,n,t,s,e){let l=o(i,n);if(!e||l<=t)return l;const r={x:n.x-s.width,y:n.y};if(l=o(i,r),l<=t)return l;const a={x:n.x-s.width,y:n.y-s.height};if(l=o(i,a),l<=t)return l;const c={x:n.x,y:n.y-s.height};return l=o(i,c),l}class g extends s{constructor(i){super(i),this.linkContainer=i}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(n){var t;if(!n.options.links)return;n.links=[];const s=n.getPosition(),e=this.container,o=e.canvas.size;if(s.x<0||s.y<0||s.x>o.width||s.y>o.height)return;const l=n.options.links,r=l.opacity,a=null!==(t=n.retina.linksDistance)&&void 0!==t?t:0,c=l.warp,d=c?new k(s.x,s.y,a,o):new i(s.x,s.y,a),h=e.particles.quadTree.query(d);for(const i of h){const t=i.options.links;if(n===i||!(null==t?void 0:t.enable)||l.id!==t.id||i.spawning||i.destroyed||!i.links||-1!==n.links.map((i=>i.destination)).indexOf(i)||-1!==i.links.map((i=>i.destination)).indexOf(n))continue;const e=i.getPosition();if(e.x<0||e.y<0||e.x>o.width||e.y>o.height)continue;const d=w(s,e,a,o,c&&t.warp);if(d>a)return;const h=(1-d/a)*r;this.setColor(n),n.links.push({destination:i,opacity:h})}}isEnabled(i){var n;return!!(null===(n=i.options.links)||void 0===n?void 0:n.enable)}loadParticlesOptions(i,...n){var t,s;i.links||(i.links=new v);for(const e of n)i.links.load(null!==(s=null!==(t=null==e?void 0:e.links)&&void 0!==t?t:null==e?void 0:e.lineLinked)&&void 0!==s?s:null==e?void 0:e.line_linked)}reset(){}setColor(i){if(!i.options.links)return;const n=this.linkContainer,t=i.options.links;let s=void 0===t.id?n.particles.linksColor:n.particles.linksColors.get(t.id);if(s)return;const o=t.color;s=e(o,t.blink,t.consent),void 0===t.id?n.particles.linksColor=s:n.particles.linksColors.set(t.id,s)}}function x(i,n){const t=((s=i.map((i=>i.id))).sort(((i,n)=>i-n)),s.join("_"));var s;let e=n.get(t);return void 0===e&&(e=p(),n.set(t,e)),e}class b{constructor(i){this.container=i,this._freqs={links:new Map,triangles:new Map}}drawParticle(i,n){var t;const s=n.options;if(!n.links||n.links.length<=0)return;const e=n.links.filter((i=>s.links&&this.getLinkFrequency(n,i.destination)<=s.links.frequency));for(const o of e)this.drawTriangles(s,n,o,e),o.opacity>0&&(null!==(t=n.retina.linksWidth)&&void 0!==t?t:0)>0&&this.drawLinkLine(n,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(i){if(i.links=[],!i.options.links)return;const n=this.container.retina.pixelRatio;i.retina.linksDistance=i.options.links.distance*n,i.retina.linksWidth=i.options.links.width*n}particleDestroyed(i){i.links=[]}drawLinkLine(i,n){const t=this.container,s=t.actualOptions,e=n.destination,d=i.getPosition(),k=e.getPosition();let y=n.opacity;t.canvas.draw((n=>{var f,v,w;if(!i.options.links)return;let g;const x=null===(f=i.options.twinkle)||void 0===f?void 0:f.lines;if(null==x?void 0:x.enable){const i=x.frequency,n=c(x.color);p()<i&&n&&(g=n,y=h(x.opacity))}if(!g){const n=i.options.links,s=void 0!==(null==n?void 0:n.id)?t.particles.linksColors.get(n.id):t.particles.linksColor;g=u(i,e,s)}if(!g)return;const b=null!==(v=i.retina.linksWidth)&&void 0!==v?v:0,q=null!==(w=i.retina.linksDistance)&&void 0!==w?w:0;!function(i,n,t,s,e,d,h,u,p,k,y,f){let v=!1;if(o(t,s)<=e)l(i,t,s),v=!0;else if(h){let n,o;const a={x:s.x-d.width,y:s.y},c=r(t,a);if(c.distance<=e){const i=t.y-c.dy/c.dx*t.x;n={x:0,y:i},o={x:d.width,y:i}}else{const i={x:s.x,y:s.y-d.height},l=r(t,i);if(l.distance<=e){const i=-(t.y-l.dy/l.dx*t.x)/(l.dy/l.dx);n={x:i,y:0},o={x:i,y:d.height}}else{const i={x:s.x-d.width,y:s.y-d.height},l=r(t,i);if(l.distance<=e){const i=t.y-l.dy/l.dx*t.x;n={x:-i/(l.dy/l.dx),y:i},o={x:n.x+d.width,y:n.y+d.height}}}}n&&o&&(l(i,t,n),l(i,s,o),v=!0)}if(v){if(i.lineWidth=n,u&&(i.globalCompositeOperation=p),i.strokeStyle=a(k,y),f.enable){const n=c(f.color);n&&(i.shadowBlur=f.blur,i.shadowColor=a(n))}i.stroke()}}(n,b,d,k,q,t.canvas.size,i.options.links.warp,s.backgroundMask.enable,s.backgroundMask.composite,g,y,i.options.links.shadow)}))}drawLinkTriangle(i,n,t){var s;if(!i.options.links)return;const e=this.container,l=e.actualOptions,r=n.destination,h=t.destination,p=i.options.links.triangles,k=null!==(s=p.opacity)&&void 0!==s?s:(n.opacity+t.opacity)/2;k<=0||e.canvas.draw((n=>{var t;const s=i.getPosition(),y=r.getPosition(),f=h.getPosition(),v=null!==(t=i.retina.linksDistance)&&void 0!==t?t:0;if(o(s,y)>v||o(f,y)>v||o(f,s)>v)return;let w=c(p.color);if(!w){const n=i.options.links,t=void 0!==(null==n?void 0:n.id)?e.particles.linksColors.get(n.id):e.particles.linksColor;w=u(i,r,t)}w&&function(i,n,t,s,e,o,l,r){d(i,n,t,s),e&&(i.globalCompositeOperation=o),i.fillStyle=a(l,r),i.fill()}(n,s,y,f,l.backgroundMask.enable,l.backgroundMask.composite,w,k)}))}drawTriangles(i,n,t,s){var e,o,l;const r=t.destination;if(!(null===(e=i.links)||void 0===e?void 0:e.triangles.enable)||!(null===(o=r.options.links)||void 0===o?void 0:o.triangles.enable))return;const a=null===(l=r.links)||void 0===l?void 0:l.filter((i=>{const n=this.getLinkFrequency(r,i.destination);return r.options.links&&n<=r.options.links.frequency&&s.findIndex((n=>n.destination===i.destination))>=0}));if(null==a?void 0:a.length)for(const c of a){const s=c.destination;this.getTriangleFrequency(n,r,s)>i.links.triangles.frequency||this.drawLinkTriangle(n,t,c)}}getLinkFrequency(i,n){return x([i,n],this._freqs.links)}getTriangleFrequency(i,n,t){return x([i,n,t],this._freqs.triangles)}}class q{constructor(){this.id="links"}getPlugin(i){return new b(i)}loadOptions(){}needsPlugin(){return!0}}async function C(i){await async function(i){await i.addInteractor("particlesLinks",(i=>new g(i)))}(i),await async function(i){const n=new q;await i.addPlugin(n)}(i)}export{C as l};
